<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebSocket Presentation Control Test</title>
    <script>
        var socket;
        function connectWithQRCode() {
            var baseUrl = "localhost:8080";
            var qrCode = document.getElementById('qrCode').value;
            socket = new WebSocket('ws://' + baseUrl + '/pt?qrCode=' + encodeURIComponent(qrCode));

            socket.onopen = function() {
                console.log('Connected with QR Code');
            };

            socket.onmessage = function(event) {
                console.log('Received message: ' + event.data);
            };

            socket.onclose = function() {
                console.log('Disconnected');
            };
        }

        function sendStartPresentation(qrCode, notificationStatus) {
            const message = JSON.stringify({
                command: "startPresentation",
                qrCode: qrCode,
                recordCondition: recordCondition,
                notificationStatus: notificationStatus,
                data: {}
            });
            socket.send(message);
        }

        function sendUpdateField(field, value) {
            const message = JSON.stringify({
                command: "updateField",
                qrCode: "qrCode",
                recordCondition: recordCondition,
                notificationStatus: notificationStatus,
                data: { field: field, value: value }
            });
            socket.send(message);
        }

        function sendUpdateRecordCondition(recordCondition) {
            const message = JSON.stringify({
                command: "updateRecordCondition",
                qrCode: "qrCode",
                recordCondition: recordCondition,
                notificationStatus: notificationStatus,
                data: {}
            });
            socket.send(message);
        }

        function sendDeleteAllFields() {
            const message = JSON.stringify({
                command: "deleteAllFields",
                qrCode: "qrCode",
                recordCondition: recordCondition,
                notificationStatus: notificationStatus,
                data: {}
            });
            socket.send(message);
        }
    </script>
</head>
<body>
<h1>WebSocket Presentation Control Test Page</h1>
<input type="text" id="qrCode" placeholder="Enter QR Code">
<button onclick="connectWithQRCode()">Connect WebSocket with QR Code</button>
<br><br>
<input type="text" id="notificationStatus" placeholder="Notification Status">
<button onclick="sendStartPresentation(document.getElementById('notificationStatus').value)">Start Presentation</button>
<br><br>
<input type="text" id="field" placeholder="Field">
<input type="text" id="value" placeholder="Value">
<button onclick="sendUpdateField(document.getElementById('field').value, document.getElementById('value').value)">Send Update Field Command</button>
<br><br>
<input type="text" id="recordCondition" placeholder="Record Condition">
<button onclick="sendUpdateRecordCondition(document.getElementById('recordCondition').value)">Update Record Condition</button>
<br><br>
<button onclick="sendDeleteAllFields()">Send Delete All Fields Command</button>
</body>
</html>
